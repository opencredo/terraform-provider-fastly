resource "fastly_service_wasm" "foo" {
    name = "{{.Name}}"

    domain {
        name    = "{{.DomainName}}"
        comment = "tf-testing-domain"
    }

    {{range .Backends}}
    backend {
        address = "{{.Address}}"
        name    = "{{.Name}}"
    }
    {{end}}

    package {
        filename = "test_fixtures/package/valid.tar.gz"
        source_code_hash = filesha512("test_fixtures/package/valid.tar.gz")
    }

    force_destroy = true
}